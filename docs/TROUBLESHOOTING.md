# æ•…éšœæ’é™¤æŒ‡å—

## ğŸš¨ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 1. @mastra/client-js å¯¼å…¥é”™è¯¯

#### é—®é¢˜æè¿°
```
error TS2305: Module '"@mastra/client-js"' has no exported member 'Mastra'.
```

#### è§£å†³æ–¹æ¡ˆ
âœ… **å·²ä¿®å¤**: ç³»ç»Ÿå·²æ·»åŠ å…¼å®¹æ€§å¯¼å…¥å’Œ fallback æœºåˆ¶ã€‚

**æ£€æŸ¥æ­¥éª¤**:
1. ç¡®è®¤ä¾èµ–å·²å®‰è£…ï¼š`npm install @mastra/client-js`
2. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼Œç¡®è®¤æ˜¯å¦ä½¿ç”¨ fallback æ¨¡å¼
3. å¦‚æœä½¿ç”¨ fallbackï¼Œæ—…æ¸¸è§„åˆ’åŠŸèƒ½ä»ç„¶å¯ç”¨ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰

#### Fallback æ¨¡å¼è¯´æ˜
- ç³»ç»Ÿæ£€æµ‹åˆ°å¯¼å…¥å¤±è´¥æ—¶ä¼šè‡ªåŠ¨å¯ç”¨
- æä¾›åŸºæœ¬çš„æ—…æ¸¸è§„åˆ’åŠŸèƒ½
- æ˜¾ç¤º "âš ï¸ ä½¿ç”¨å›é€€æ¨¡å¼" çš„çŠ¶æ€ä¿¡æ¯

### 2. API è¿æ¥å¤±è´¥ (404 é”™è¯¯)

#### é—®é¢˜æè¿°
```
https://agent.juzhiqiang.shop/api/agents/run - 404 Not Found
```

#### è§£å†³æ–¹æ¡ˆ
âœ… **å·²ä¿®å¤**: æ”¹ç”¨ @mastra/client-js SDK è€Œéç›´æ¥ REST è°ƒç”¨ã€‚

**æ£€æŸ¥æ­¥éª¤**:
1. ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„"æµ‹è¯•è¿æ¥"æŒ‰é’®
2. æŸ¥çœ‹"è°ƒè¯•ä¿¡æ¯"é¢æ¿äº†è§£è¯¦ç»†çŠ¶æ€
3. æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®æ˜¯å¦æ­£ç¡®

#### API è°ƒç”¨æ–¹å¼æ›´æ–°
- **æ—§æ–¹å¼**: ç›´æ¥ fetch() è°ƒç”¨ REST API
- **æ–°æ–¹å¼**: ä½¿ç”¨ MastraClient SDK

### 3. æ—…æ¸¸è§„åˆ’åŠŸèƒ½æ— å“åº”

#### é—®é¢˜æ’æŸ¥

1. **æ£€æŸ¥ API è¿æ¥çŠ¶æ€**
   ```
   é¡µé¢å³ä¸Šè§’æŸ¥çœ‹è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨ï¼š
   - ğŸŸ¢ ç»¿è‰²: API è¿æ¥æ­£å¸¸
   - ğŸ”´ çº¢è‰²: API è¿æ¥å¤±è´¥
   - ğŸŸ¡ é»„è‰²: æ­£åœ¨æ£€æµ‹ä¸­
   ```

2. **æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯**
   - ç‚¹å‡»"è°ƒè¯•ä¿¡æ¯"æŒ‰é’®
   - æŸ¥çœ‹å¯ç”¨çš„ Agentsã€Toolsã€Workflows
   - ç¡®è®¤æ˜¯å¦æ‰¾åˆ° travelRouteAgent

3. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°**
   ```javascript
   // æŸ¥çœ‹è¯¦ç»†çš„ API è°ƒç”¨æ—¥å¿—
   console.log('Mastra connection test:', result);
   console.log('Available agents:', agents);
   ```

#### å¸¸è§è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆ 1: é‡æ–°æµ‹è¯•è¿æ¥**
- ç‚¹å‡»"æµ‹è¯•è¿æ¥"æŒ‰é’®
- ç­‰å¾…è¿æ¥çŠ¶æ€æ›´æ–°

**æ–¹æ¡ˆ 2: ä½¿ç”¨ Fallback æ¨¡å¼**
- å³ä½¿ API ä¸å¯ç”¨ï¼Œfallback æ¨¡å¼ä»æä¾›åŸºæœ¬åŠŸèƒ½
- å¯ä»¥ä½“éªŒæ—…æ¸¸è§„åˆ’çš„ç•Œé¢å’Œæµç¨‹

**æ–¹æ¡ˆ 3: æ£€æŸ¥ç½‘ç»œç¯å¢ƒ**
- ç¡®è®¤å¯ä»¥è®¿é—® https://agent.juzhiqiang.shop
- æ£€æŸ¥é˜²ç«å¢™æˆ–ä»£ç†è®¾ç½®

### 4. ç¯å¢ƒå˜é‡é…ç½®é—®é¢˜

#### æ£€æŸ¥é…ç½®æ–‡ä»¶

1. **å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿**
   ```bash
   cp .env.example .env
   ```

2. **ç¡®è®¤å¿…è¦çš„ç¯å¢ƒå˜é‡**
   ```bash
   # å¿…é¡»é…ç½®
   VITE_MASTRA_API_URL=https://agent.juzhiqiang.shop
   VITE_RECODE_AGENT_API_URL=https://agent.juzhiqiang.shop
   VITE_GRAPHQL_ENDPOINT=https://ai-admin.juzhiqiang.shop
   ```

3. **é‡å¯å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

### 5. æ„å»ºé”™è¯¯

#### TypeScript ç¼–è¯‘é”™è¯¯

**å¸¸è§é”™è¯¯**: ç±»å‹å®šä¹‰é—®é¢˜
```
Property 'agents' does not exist on type '...'
```

**è§£å†³æ–¹æ¡ˆ**: å·²æ·»åŠ  `any` ç±»å‹å¤„ç†
```typescript
private mastraClient: any; // ä½¿ç”¨ any ç±»å‹é¿å…ç¼–è¯‘é”™è¯¯
```

#### ä¾èµ–å®‰è£…é—®é¢˜

**æ£€æŸ¥ä¾èµ–**:
```bash
npm install
# æˆ–
yarn install
```

**æ¸…ç†é‡è£…**:
```bash
rm -rf node_modules package-lock.json
npm install
```

### 6. è¿è¡Œæ—¶é”™è¯¯

#### ç½‘ç»œè¯·æ±‚å¤±è´¥

**é”™è¯¯ä¿¡æ¯**: `fetch failed` æˆ– `network error`

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤ API æœåŠ¡å™¨çŠ¶æ€
3. æŸ¥çœ‹æµè§ˆå™¨ç½‘ç»œé¢æ¿
4. æ£€æŸ¥ CORS é…ç½®

#### React ç»„ä»¶é”™è¯¯

**é”™è¯¯ä¿¡æ¯**: ç»„ä»¶æ¸²æŸ“å¤±è´¥

**æ£€æŸ¥æ­¥éª¤**:
1. æ‰“å¼€ React Developer Tools
2. æŸ¥çœ‹ç»„ä»¶çŠ¶æ€å’Œ props
3. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
4. ç¡®è®¤æ‰€æœ‰å¿…è¦çš„ props éƒ½å·²ä¼ é€’

### 7. åŠŸèƒ½æµ‹è¯•

#### åŸºç¡€åŠŸèƒ½æµ‹è¯•

1. **é¡µé¢åŠ è½½**
   - âœ… å¯¼èˆªæ æ˜¾ç¤ºæ­£å¸¸
   - âœ… é¡µé¢å†…å®¹å®Œæ•´æ˜¾ç¤º
   - âœ… æ²¡æœ‰æ§åˆ¶å°é”™è¯¯

2. **API è¿æ¥æµ‹è¯•**
   - âœ… è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨æ˜¾ç¤ºçŠ¶æ€
   - âœ… "æµ‹è¯•è¿æ¥"æŒ‰é’®å¯ç‚¹å‡»
   - âœ… è°ƒè¯•ä¿¡æ¯é¢æ¿å¯æ‰“å¼€

3. **æ—…æ¸¸è§„åˆ’æµ‹è¯•**
   - âœ… å¿«é€Ÿè§„åˆ’è¡¨å•å¯å¡«å†™
   - âœ… è‡ªç„¶è¯­è¨€è¾“å…¥å¯å‘é€
   - âœ… ç³»ç»Ÿæœ‰å“åº”ï¼ˆçœŸå® API æˆ– fallbackï¼‰

#### é«˜çº§åŠŸèƒ½æµ‹è¯•

1. **çœŸå® API æ¨¡å¼**
   - âœ… è¿æ¥çŠ¶æ€æ˜¾ç¤ºç»¿è‰²
   - âœ… èƒ½è·å–åˆ°çœŸå®çš„ Agents åˆ—è¡¨
   - âœ… æ—…æ¸¸è§„åˆ’è¿”å› AI ç”Ÿæˆçš„å†…å®¹

2. **Fallback æ¨¡å¼**
   - âœ… è¿æ¥çŠ¶æ€æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
   - âœ… ç³»ç»Ÿæ¶ˆæ¯æç¤ºä½¿ç”¨ fallback
   - âœ… ä»èƒ½ç”Ÿæˆæ¨¡æ‹Ÿçš„æ—…æ¸¸è§„åˆ’

### 8. å¼€å‘ç¯å¢ƒè®¾ç½®

#### æœ¬åœ°å¼€å‘é…ç½®

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/juzhiqiang/xiao-bao-bao.git
   cd xiao-bao-bao
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ä¸­çš„ API åœ°å€
   ```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

5. **è®¿é—®åº”ç”¨**
   ```
   http://localhost:5173/travel-planning
   ```

#### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **æ„å»ºé¡¹ç›®**
   ```bash
   npm run build
   ```

2. **éƒ¨ç½²åˆ° GitHub Pages**
   ```bash
   npm run deploy
   ```

3. **è®¿é—®åœ¨çº¿ç‰ˆæœ¬**
   ```
   https://juzhiqiang.github.io/xiao-bao-bao/travel-planning
   ```

## ğŸ”§ è°ƒè¯•æŠ€å·§

### 1. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·

**Console é¢æ¿**:
- æŸ¥çœ‹ API è°ƒç”¨æ—¥å¿—
- æ£€æŸ¥é”™è¯¯ä¿¡æ¯
- ç›‘æ§ç³»ç»ŸçŠ¶æ€

**Network é¢æ¿**:
- ç›‘æ§ API è¯·æ±‚
- æ£€æŸ¥å“åº”çŠ¶æ€ç 
- æŸ¥çœ‹è¯·æ±‚/å“åº”å†…å®¹

**React Developer Tools**:
- æ£€æŸ¥ç»„ä»¶çŠ¶æ€
- ç›‘æ§ props å˜åŒ–
- è°ƒè¯•ç»„ä»¶æ¸²æŸ“

### 2. ç³»ç»Ÿå†…ç½®è°ƒè¯•åŠŸèƒ½

**è¿æ¥æµ‹è¯•**:
```typescript
const result = await travelAPIService.testConnection();
console.log('Connection test result:', result);
```

**è·å–æœåŠ¡ä¿¡æ¯**:
```typescript
const agents = await travelAPIService.getAvailableAgents();
const tools = await travelAPIService.getAvailableTools();
const workflows = await travelAPIService.getAvailableWorkflows();
```

**æ£€æŸ¥å¥åº·çŠ¶æ€**:
```typescript
const isHealthy = await travelAPIService.checkHealth();
console.log('API Health:', isHealthy);
```

### 3. æ—¥å¿—åˆ†æ

**æ­£å¸¸è¿è¡Œæ—¥å¿—**:
```
Testing Mastra connection to: https://agent.juzhiqiang.shop
Connection test - Available agents: [...]
âœ… Mastra API è¿æ¥æ­£å¸¸ï¼Œå·²æ‰¾åˆ°æ—…æ¸¸è§„åˆ’ Agent
```

**Fallback æ¨¡å¼æ—¥å¿—**:
```
Failed to import @mastra/client-js, using fallback implementation
âš ï¸ ä½¿ç”¨å›é€€æ¨¡å¼ï¼Œ@mastra/client-js å¯¼å…¥å¤±è´¥
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šè§£å†³æ–¹æ¡ˆéƒ½æ— æ³•è§£å†³é—®é¢˜ï¼Œè¯·ï¼š

1. **æäº¤ Issue**: [GitHub Issues](https://github.com/juzhiqiang/xiao-bao-bao/issues)
2. **åŒ…å«ä¿¡æ¯**:
   - é”™è¯¯ä¿¡æ¯æˆªå›¾
   - æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—
   - ç¯å¢ƒä¿¡æ¯ï¼ˆæ“ä½œç³»ç»Ÿã€æµè§ˆå™¨ç‰ˆæœ¬ï¼‰
   - é‡ç°æ­¥éª¤

3. **æŸ¥çœ‹æ–‡æ¡£**:
   - [æ—…æ¸¸è§„åˆ’ä½¿ç”¨æŒ‡å—](./travel-planning-guide.md)
   - [é¡¹ç›® README](../README.md)

---

ğŸ’¡ **æç¤º**: å¤§å¤šæ•°é—®é¢˜éƒ½å¯ä»¥é€šè¿‡é¡µé¢å³ä¸Šè§’çš„"æµ‹è¯•è¿æ¥"å’Œ"è°ƒè¯•ä¿¡æ¯"åŠŸèƒ½å¿«é€Ÿè¯Šæ–­ï¼
